# 前台开发笔记

## 前台环境配置指南

* 核心步骤说明

  ```bash
  mkdir react-next-blog
  cd react-next-blog
  npx create-next-app blog  #npm install -g create-next-app
  
  yarn add @zeit/next-css
  yarn add antd
  yarn add babel-plugin-import
  yarn add null-loader #antd 按需引入解决
  
  # 配置 next.config.js
  # 配置 .babelrc
  # 修改package.json
  ```

* 配置 `next.config.js` 说明

  ```javascript
  const withCss = require('@zeit/next-css')
  
  // 可以使用css样式
  if (typeof require !== undefined) {
    require.extensions['.css'] = file => { }
  }
  
  // antd UI库按需引入
  module.exports = withCss({
    webpack: (config, { isServer }) => {
      if (isServer) {
        const antStyles = /antd\/.*?\/style\/css.*?/
        const origExternals = [...config.externals]
        config.externals = [
          (context, request, callback) => {
            if (request.match(antStyles)) return callback()
            if (typeof origExternals[0] === 'function') {
              origExternals[0](context, request, callback)
            } else {
              callback()
            }
          },
          ...(typeof origExternals[0] === 'function' ? [] : origExternals),
        ]
  
        config.module.rules.unshift({
          test: antStyles,
          use: 'null-loader',
        })
      }
      return config
    }
  })
  
  ```

* 关于`pages/_app.js` 说明

  ```javascript
  import App from 'next/app'
  // 全局样式引入
  import '../static/style/pages/comm.css'
  
  export default App
  ```

## 代码检查提示

* 下载检查

  ```bash
  npm install -g standard
  ```

* 主要错误

  ```javascript
  // 单引号 双引号的混乱 --- 标准是使用单引号
  // 空格多或少的提示
  ```

## 开发中的细节

1. 广告组件和博主自我介绍组件用静态来作，就是没有后台配置。这样作的好处是节省掉每次和数据库的交互和后台的交互，提高博客性能。博客有时候并发是很大的，所以能节省的资源一定要节省。
2. 开发广告组件在预览的时候显示不出来，原因居然是使用了`AdBlock`插件（出乎意料啊！！！）
