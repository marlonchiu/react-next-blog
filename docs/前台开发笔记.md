# 前台开发笔记

## 前台环境配置指南

* 核心步骤说明

  ```bash
  mkdir react-next-blog
  cd react-next-blog
  npx create-next-app blog  #npm install -g create-next-app
  
  yarn add @zeit/next-css
  yarn add antd
  yarn add babel-plugin-import
  yarn add null-loader #antd 按需引入解决
  
  # 配置 next.config.js
  # 配置 .babelrc
  # 修改package.json
  ```

* 配置 `next.config.js` 说明

  ```javascript
  const withCss = require('@zeit/next-css')
  
  // 可以使用css样式
  if (typeof require !== undefined) {
    require.extensions['.css'] = file => { }
  }
  
  // antd UI库按需引入
  module.exports = withCss({
    webpack: (config, { isServer }) => {
      if (isServer) {
        const antStyles = /antd\/.*?\/style\/css.*?/
        const origExternals = [...config.externals]
        config.externals = [
          (context, request, callback) => {
            if (request.match(antStyles)) return callback()
            if (typeof origExternals[0] === 'function') {
              origExternals[0](context, request, callback)
            } else {
              callback()
            }
          },
          ...(typeof origExternals[0] === 'function' ? [] : origExternals),
        ]
  
        config.module.rules.unshift({
          test: antStyles,
          use: 'null-loader',
        })
      }
      return config
    }
  })
  
  ```

* 关于`pages/_app.js` 说明

  ```javascript
  import App from 'next/app'
  // 全局样式引入
  import '../static/style/pages/comm.css'
  
  export default App
  ```
